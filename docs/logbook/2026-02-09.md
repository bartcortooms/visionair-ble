# 2026-02-09: Post-#26 follow-up (issues #19, #6, #5)

## Environment check

- Confirmed ADB endpoint is reachable: `192.168.1.160:38087`
- `adb connect` succeeds and `adb shell wm size` responds
- `vmictl.py battery` works (55%)

## #19 humidity validation attempt

Tried running a fresh checkpoint capture session after merge #26.

Observed blocker:
- UI dumps show `com.android.systemui` keyguard/lockscreen as top window
- `vmictl` navigation commands that require app selectors can stall while waiting for elements when device is locked

Action taken:
- Added `scripts/capture/preflight_capture.py` to check connectivity + keyguard state before running long capture flows
- Added issue #19 runbook in `docs/reverse-engineering/playbook.md` with explicit per-step checkpoints and extraction commands

## #6 night ventilation decoding

Action taken:
- Added concrete runbook (3-run method, delayed checkpoint at +15s, extraction commands) in playbook
- Includes `analyze_settings_packets.py` post-processing step for candidate packet path detection

## #5 bypass state (weather-dependent)

Action taken:
- Added practical capture plan/checklist in playbook focused on observational checkpoints only (no risky writes)
- Added structured worksheet guidance to correlate icon state, weather, and candidate status bytes

## Follow-up capture attempt (ADB 192.168.1.160:38087)

### #19 humidity validation

- Re-ran preflight with explicit target: device reachable + keyguard unlocked.
- `vmictl connect` now works reliably and reaches VMI+ foreground.
- Completed a partial checkpoint session and successfully pulled snoop log:
  - `data/captures/issue19_humidity_validation_run_20260209_150708/btsnoop.log`
  - 1278 VMI packets extracted (639 writes / 639 notifies)
  - Confirmed again: `DEVICE_STATE` byte 4 stayed fixed at **55** across the run while probe humidity byte 8 moved (64â†’65 in sampled packets), so no new evidence yet that byte 4 tracks live humidity.
- Limitation: only one timestamped checkpoint was captured before UI selector flow stalled on deeper sensor-navigation commands, so app-value correlation is still incomplete.

### #6 night ventilation decoding

- Reached `special-modes-full` and captured a baseline screenshot checkpoint.
- Session-end bugreport pull intermittently failed with ADB-over-WiFi protocol faults, limiting controlled multi-run execution.
- From the successful #19 snoop, extracted non-polling request candidates worth targeting in dedicated #6 runs:
  - `REQUEST param 0x1c` with values `{0x0e, 0x10, 0x12}` (6 packets total)
  - `REQUEST param 0x17` with values `{0x19, 0x1a}` (2 packets total)
- These are now concrete candidate opcodes for Special Modes-related toggles, but still unproven without clean ON/OFF checkpoint correlation.

### #5 bypass state

- Bypass remained observational-only; no bypass-icon transition capture achieved in this window.
- Existing runbook remains the ready-to-run path pending natural weather-driven icon transitions.

### Tooling improvement

- Hardened `vmictl session-end` bugreport collection with one retry + ADB reconnect on failure.
- Change is in `scripts/capture/vmictl_lib/controller.py` and directly targets intermittent `adb bugreport` protocol faults seen today.

## Notes

No risky device writes were performed intentionally in this session; all observed writes were from normal app polling/background behavior during capture.
